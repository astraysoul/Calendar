<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>行事曆</title>
    <link rel="stylesheet" href="assets/js/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="assets/css/custom.css">
</head>
<body> -->
<header class="room-header">
    <!-- 上方選單 -->
    <div class="top-menu clearfix">
        <div class="room-back icon-arrow"></div>
        <div class="room-title">會議室預約</div>
        <div class="overview icon-time-period-1"></div>
    </div>
</header>
<div class="room-page">
    <!-- 預約時間 -->
    <div class="reservation-time">
        <div class="room-icon">
            <span class="icon-reserve"></span>
        </div> 
        <div class="room-content se-time">
            <p>預約日期</p>
            <!-- <div class="room-star clearfix">
                <p class="rs-day">11月23日</p>
                <p class="rs-week">星期四</p>
                <p class="rs-time">上午11:30</p>
            </div>
            <div class="room-end clearfix">
                <p class="re-day">11月23日</p>
                <p class="re-week">星期四</p>
                <p class="re-time">上午12:30</p>
            </div> -->
        </div>
    </div>

    <!-- 與會人員 -->
    <div class="personnel">
        <div class="room-icon">
            <span class="icon-Participants"></span>
        </div>
        <div class="room-content">
            <p>與會人員</p>
            <button type="button" class="" onclick="">與會人員選單</button>
            <div class="personnel-num">
                <!-- 共 <span>58</span> 人 -->
            </div>
        </div>
    </div>
    
    <!-- 會議主題 -->
    <div class="metting-theme">
        <div class="room-icon">
            <span class="icon-theme"></span>
        </div>
        <div class="room-content">
            <p>會議主題</p>
            <input type="text" class="theme-title" value="">
        </div>
    </div>
    
    <!-- 您的時段可以選擇以下室別 -->
    <div class="choose-room">
        <div class="room-icon">
            <span class="icon-time-period-2"></span>
        </div>
        <div class="room-content room-form">
            <p>您的時段可以選擇以下室別</p>
            <form action="">
                <!-- <div>
                    <input type="checkbox" id="a1" class="">
                    <label for="a1">A1大會議室</label>
                    <span>可容納13人</span>
                </div>
                <div>
                    <input type="checkbox" id="b1_b" class="">
                    <label for="b1_b">B1大會議室</label>
                    <span>可容納4-5人</span>
                </div>
                <div>
                    <input type="checkbox" id="b1_s" class="">
                    <label for="b1_s">B1小會議室</label>
                    <span>可容納3人</span>
                </div>
                <div>
                    <input type="checkbox" id="c1" class="">
                    <label for="c1">C1小會議室</label>
                    <span>可容納6-8人</span>
                </div> -->
            </form>
        </div>
    </div>
    <!-- 確定新增 彈跳視窗 -->
    <div class="confirm-window none">
        <div class="title">提醒您！您的會議人數大於會議室容納人數</div>
        <div class="cfwindow-btn clearfix">
            <button type="button" name="" class="confirm">確定</button>
        </div>
    </div>
    <!-- 半透黑背景 -->
    <div class="slide-nav-bg"></div>
    
</div>
<div class="room-btn clearfix">
    <button type="button" name="" class="cancel">取消</button>
    <button type="button" name="" class="confirm">預約</button>
</div>

<!-- </body>
<script src="assets/js/jquery-3.2.1.min.js"></script>
<script src="assets/js/jquery.touchwipe.js"></script>
<script src="assets/js/bootstrap/js/bootstrap.min.js"></script>
<script src="assets/js/jquery.hashchange.js"></script>
<script src="assets/js/global.js"></script>
<script src="assets/js/js.js"></script> -->

<script>
$(function(){
    pgTarget = $('.room-page');
    var re_size_add = new re_window_add(pgTarget);
    $('footer,.calendar-box,.slideNav').hide(); 
});
var room_locat = function(){
    var $this = this;
    this.r_goPage = function (page) {
        $.post(page + '.html', {}, function (pg) {
            $('.page').html(pg);
            $('footer,.calendar-box,.slideNav').hide(); 
        });
    }
    this.init = function(){
        // 底部按鈕 - 確認與取消
        $('.room-btn button').on('click',function(){
            var btnClass = $(this).attr('class');
            if(btnClass === 'confirm'){
                page = 'add';
                $this.r_goPage(page);
            }else{
                page = 'add';
                $this.r_goPage(page);
            }
        });
        // 上方按鈕
        $('.top-menu div').on('click',function(){
            var divClass = $(this).attr('class');
            if( divClass === 'room-back icon-arrow' ){
                page = 'add';
                $this.r_goPage(page);

            }else if( divClass === 'overview icon-time-period-1' ){
                page = 'overview'
                $this.r_goPage(page);
            }
        });
    }
    $this.init();
}
var rmpage_fn = new room_locat();

var room_locat = function () {
    var $this = this;
    // 如果他再新增行程已有選時間，近來這個頁面時就要判斷當下有無會議室可用
    // 如果沒有，要顯示文字 '您選取的時段目前無會議室可預約'
    this.no_room = function(){
        var noRoom_div = $('<div class="no-room">')
        noRoom_div.text('您選取的時段目前無會議室可預約。')
        $('.room-form form').append(noRoom_div)
    }
    this.se_time = function(){   
        // 開始時間 
        var p_rs_day  = $('<p class="rs-day">').text( add_obj.startime.mouth+'月'+' '+add_obj.startime.day+'日'),
            p_rs_week = $('<p class="rs-week">').text(' '+'週'+ add_obj.startime.week),
            p_rs_time = $('<p class="rs-time">').text(add_obj.startime.hour+' : '+ add_obj.startime.minute),
        // 結束時間
            p_re_day  = $('<p class="re-day">').text(add_obj.endtime.mouth+'月'+' '+add_obj.endtime.day+'日'),
            p_re_week = $('<p class="re-week">').text(' '+'週'+ add_obj.endtime.week),
            p_re_time = $('<p class="re-time">').text(add_obj.endtime.hour+' : '+ add_obj.endtime.minute),
        // 外層div
            div_star  = $('<div class="room-star clearfix">').append(p_rs_day, p_rs_week, p_rs_time),
            div_end   = $('<div class="room-end clearfix">').append(p_re_day, p_re_week, p_re_time);

        $('.se-time').append(div_star,div_end);

        // 與會人員
        var span_num = $('<span>').text('共' + add_obj.addelse.people + '人');
        $('.personnel-num').append(span_num);
    }
    this.room_theme = function(){
        $('.theme-title').attr('value',add_obj.addelse.ordTitle);
    }
    // 選擇會議室
    this.select_room = function(){

        for(var i = 0; i < ov_obj.length; i++){
            var $input  = $('<input type="checkbox">').attr('id',ov_obj[i].type),
                $label  = $('<label for="'+ ov_obj[i].type +'">').text(ov_obj[i].type + ov_obj[i].room),
                $span01 = $('<span>').text('可容納'),
                $span02 = $('<span>').text(ov_obj[i].people + '人').addClass('num-people'),
                $div    = $('<div>').append($input, $label, $span01, $span02);
            
            $('.room-form form').append($div);
        }
    }
    // 判斷會議室人數與與會人員的數量是否相符
    // 人數大於會議室容量 就跳彈出視窗
    this.select_num = function(){
        // 與會人數
        var s_num = add_obj.addelse.people;
        $('.room-form form div').on('click','input',function(){

            // 會議室人數
            var inputStatus = $(this).prop('checked'),
                room_id     = $(this).attr('id'),
                r_num       = $(this).siblings('.num-people').text(),
                num         = parseInt(r_num); 

            // 判斷人數
            if( s_num > num ){
                if( inputStatus === true ){
                    $('.confirm-window').removeClass('none');
                    $('.slide-nav-bg').fadeIn();
                }
            }
            // 同時只能點一個項目
            if( inputStatus === false ){
                $(this).prop('checked',false);
                return;
            }
            $('.room-form form input').prop('checked',false);
            $(this).prop('checked',true);

        });

        $('.room-page .confirm').on('click',function(){
            $('.confirm-window').addClass('none');
            $('.slide-nav-bg').fadeOut();
        });        
    } 
    this.init = function () {
        $this.se_time(); 
        $this.select_num();
        $this.select_room();
        $this.room_theme();
    }
    $this.init();
}
var roompage = new room_locat();
</script>
<!-- </html> -->